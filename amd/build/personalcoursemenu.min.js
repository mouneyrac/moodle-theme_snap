define(["jquery","core/log","core/ajax","core/notification"],function(a,b,c,d){var e=function(){var b=function(b,f){console.log("Call change_category ajax."),c.call([{methodname:"theme_snap_user_categories",args:{userid:2,action:b,categoryid:f},done:function(b){console.log("Change category ajax answer:"),console.log(b),a(".courseinfo").css("display","none"),a(".menu_mycategory").css("color","#b1f9ff");var c="Categories: ",d=JSON.parse(b.listing);if(0==d.length)console.log(a(".site-overlay").css("display")),"none"==a(".site-overlay").css("display")&&a(".editcat").click();else{console.log(d);var f=!0;d.forEach(function(b,d){a("[data-categoryid="+b+"]").css("display","inline"),a(".menu_mycategory[data-categoryid="+b+"]").css("color","white"),f?f=!1:c+=", ";var e="#menu_mycategory_"+b;console.log(a(e)),c+=a(e).text()})}e.text(c),a(".editcat").css("visibility","visible")},fail:function(a){console.log("Change category ajax error"),d.exception(a)}}],!0,!0)},e=a("section#fixy-my-courses div h2"),f=function(a){console.log("display the color:"),console.log(a),console.log(a.css("color"));var c=a.find(".menu_mycategory");"rgb(255, 255, 255)"==c.css("color")?(console.log("removing"),c.css("color","#b1f9ff"),b("remove",c.attr("data-categoryid"))):(c.css("color","white"),console.log(c.attr("data-categoryid")),b("add",c.attr("data-categoryid")))},g=function(){f(a(this))};a(".menu_mycategory_li").click(g),a(".menu_mycategory_li").keypress(function(){console.log(event.which);var b=a(this);(13==event.which||32==event.which)&&f(b)}),e.text("All courses");var h=function(){e.text("All Courses"),a(".editcat").css("visibility","hidden"),a("[data-courseid='2']").css("display","none"),a("[data-courseid='3']").css("display","inline-block"),a("[data-courseid='4']").css("display","inline-block"),a("[data-courseid='5']").css("display","inline-block"),a("[data-courseid='6']").css("display","inline-block"),a("[data-courseid='7']").css("display","inline-block"),a("[data-courseid='8']").css("display","inline-block"),a("[data-courseid='9']").css("display","inline-block"),a(".courseinfo").css("display","inline-block"),a(".catfilter").css("display","inline"),a(".allcourses").css("display","none")};a(".allcourses").click(h),a(".allcourses").keypress(function(){console.log(event.which),(13==event.which||32==event.which)&&h()}),a("#leftsidepanel").css("transition","width 0.1s"),a("#catbutton").css("transition","position 0.1s, top 0.1s, left 0.1s, margin 0.1s, height 0.1s, width 0.1s"),a("#allcoursesbutton").css("transition","opacity 0.05s ease"),a("#azbutton").css("transition","opacity 0.05s ease"),a("#catbutton .svg-icon").css("transition","opacity 0.1s ease");var i=function(){e.text("Categories: "),b("listing"),a(".catfilter").css("display","none"),a(".allcourses").css("display","inline")};a(".catfilter").click(i),a(".catfilter").keypress(function(){console.log(event.which),(13==event.which||32==event.which)&&i()});var j=function(){var b=a("#fixy-visible-courses"),c=b.children("div");c.sort(function(b,c){var d=a(b).find(".coursefullname").text(),e=a(c).find(".coursefullname").text();return console.log("value of a"),console.log(a(b)),console.log("value of an"),console.log(d),d.localeCompare(e)}),c.detach().appendTo(b)};a(".azsorting").click(j),a(".azsorting").keypress(function(){console.log(event.which),(13==event.which||32==event.which)&&j()})};return new e});